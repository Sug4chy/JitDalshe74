<div class="image-upload-container">
    <label class="image-upload-label">
        <InputFile accept="image/*" OnChange="HandleFileUploadAsync" style="display: none;"/>
        @if (FileUrl is null)
        {
            <div class="image-upload-box rounded"
                 data-toggle="tooltip"
                 data-placement="top"
                 title="Загрузить изображение">
                <div class="plus-sign">+</div>
            </div>
        }
        else
        {
            <img src="@FileUrl"
                 alt=""
                 class="uploaded-image rounded"
                 data-toggle="tooltip"
                 data-placement="top"
                 title="Изменить изображение"/>
        }
    </label>
</div>

@code {

    [Parameter] public string? FileUrl { get; set; }
    [Parameter] public EventCallback<string?> FileUrlChanged { get; set; }

    private async Task HandleFileUploadAsync(InputFileChangeEventArgs args)
    {
        var file = args.File;
        if (file is null)
        {
            return;
        }

        byte[] buffer = new byte[file.Size];
        await using var stream = file.OpenReadStream();
        int _ = await stream.ReadAsync(buffer);

        FileUrl = $"data:{file.ContentType};base64,{Convert.ToBase64String(buffer)}";
    }

}