<div id="@Id"
     class="modal fade"
     tabindex="-1"
     role="dialog">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Создание нового событие</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span>&times;</span>
                </button>
            </div>
            <div class="modal-body">
                <div class="image-upload-container">
                    <label class="image-upload-label">
                        <InputFile accept="image/*" OnChange="HandleFileUploadAsync" style="display: none"/>
                        <div class="image-upload-box rounded">
                            @if (_uploadedImage is null)
                            {
                                <div class="plus-sign">+</div>
                            }
                            else
                            {
                                <img src="@_uploadedImageUrl" alt="Uploaded Image" class="uploaded-image" />
                            }
                        </div>
                    </label>
                </div>
                @*TODO title*@
                @*TODO description*@
                @*TODO date*@
            </div>
            <div class="modal-footer">
                @*TODO create button*@
            </div>
        </div>
    </div>
</div>

@code {
    private IBrowserFile? _uploadedImage;
    private string? _uploadedImageUrl;

    [Parameter] public required string Id { get; init; }

    private async Task HandleFileUploadAsync(InputFileChangeEventArgs args)
    {
        var file = args.File;
        if (file is null)
        {
            return;
        }

        byte[] buffer = new byte[file.Size];
        var stream = file.OpenReadStream();
        int _ = await stream.ReadAsync(buffer);
        await stream.DisposeAsync();

        _uploadedImageUrl = $"data:{file.ContentType};base64,{Convert.ToBase64String(buffer)}";
        _uploadedImage = file;
    }

}